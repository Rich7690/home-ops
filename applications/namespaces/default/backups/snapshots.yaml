apiVersion: snapscheduler.backube/v1
kind: SnapshotSchedule
metadata:
  name: weekly-rbd
  namespace: default
spec:
  claimSelector:
    matchExpressions:
    - { key: app.kubernetes.io/instance, operator: In, values: [grafana, ceph] }
  retention:
    maxCount: 4
  schedule: "@weekly"
  snapshotTemplate:
    snapshotClassName: zfspv-snapclass  # optional
---
apiVersion: snapscheduler.backube/v1
kind: SnapshotSchedule
metadata:
  name: weekly-rbd-jelly
  namespace: default
spec:
  claimSelector:
    matchLabels:
      jelly-block: "true"
  retention:
    maxCount: 4
  schedule: "@weekly"
  snapshotTemplate:
    snapshotClassName: zfspv-snapclass  # optional
---
apiVersion: snapscheduler.backube/v1
kind: SnapshotSchedule
metadata:
  name: weekly-media
  namespace: default
spec:
  claimSelector:
    matchLabels:
      jelly-media: "true"
  retention:
    maxCount: 4
  schedule: "@weekly"
  snapshotTemplate:
    snapshotClassName: zfspv-snapclass  # optional
