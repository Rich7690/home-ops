apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: kube-state-metrics
    namespace: argocd
spec:
    project: remote-apps
    source:
        chart: kube-state-metrics
        repoURL: https://prometheus-community.github.io/helm-charts
        targetRevision: 4.29.0
        helm:
            releaseName: kube-state-metrics
            values: |
                image:
                    repository: registry.k8s.io/kube-state-metrics/kube-state-metrics
                    tag: v2.7.0@sha256:a15ca437f2309b769caa36a88240ce0266d67028f02da90f1c817c849b144273
                    pullPolicy: IfNotPresent

    destination:
        server: https://kubernetes.default.svc
        namespace: metrics
