apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: traefik
    namespace: argocd
spec:
    project: remote-apps
    source:
        chart: traefik
        repoURL: https://helm.traefik.io/traefik
        targetRevision: 20.8.0
        helm:
            releaseName: traefik
            values: |
                ingressClass:
                  enabled: true
                  isDefaultClass: false
                image:
                    name: traefik
                    tag: 2.9.6
                    pullPolicy: IfNotPresent
                providers:
                  kubernetesIngress:
                    publishedService:
                      enabled: true
                globalArguments:
                  - "--global.checknewversion=false"
                  - "--global.sendanonymoususage=false"
    destination:
        server: https://kubernetes.default.svc
        namespace: default
