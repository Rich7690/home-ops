ingress-nginx:
  fullnameOverride: ingress-nginx-external
  controller:
    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "10254"
    image:
      repository: registry.k8s.io/ingress-nginx/controller
      tag: v1.11.1
      digest: null
      runAsUser: "101"
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        add:
          - NET_BIND_SERVICE
        drop:
          - ALL
      runAsUser: 101
    podSecurityContext:
      runAsNonRoot: true
      runAsUser: 101
      runAsGroup: 65532
      fsGroup: 65532
      seccompProfile:
        type: RuntimeDefault
    config:
      use-http2: "true"
      enable-real-ip: "true" # This is safe because we are forwarding traffic ONLY from cloudflare ip ranges at the router level. If we weren't, we should set proxy-real-ip-cidr
      server-snippet: |
        real_ip_header CF-Connecting-IP;
    addHeaders:
      X-Frame-Options: SAMEORIGIN
    electionID: ingress-external-controller-leader
    ingressClass: nginx-external
    ingressClassResource:
      controllerValue: k8s.io/ingress-nginx-external
      name: nginx-external
    kind: Deployment
    updateStrategy:
      rollingUpdate:
        maxSurge: 100%
        maxUnavailable: 0
      type: RollingUpdate
    minReadySeconds: 10
    nodeSelector:
      kubernetes.io/hostname: worker-one
    metrics:
      enabled: true
      service:
        annotations: {}
    resources:
      limits:
        cpu: 4
        memory: 2G
      requests:
        cpu: 100m
        memory: 200Mi
    service:
      externalTrafficPolicy: Cluster
      loadBalancerIP: 192.168.48.11
