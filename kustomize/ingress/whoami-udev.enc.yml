apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    annotations:
        # This is somewhat of a sentinal ingress to generate TLS certs from cert-manager. Other ingress records will use that cert as its a wildcard one
        cert-manager.io/cluster-issuer: letsencrypt-prod
        cert-manager.io/private-key-algorithm: ECDSA
    name: whoami-udev
    namespace: default
    labels:
        use-cloudflare-solver: "true"
spec:
    ingressClassName: nginx-external
    rules:
        - host: ENC[AES256_GCM,data:/bfyKC4d3tM0JyT+U9LkD0zpKTtv,iv:N9eM/rdIp9bUQD3xT2ZKOTtIof5o+OFkx6dnfvQJh8M=,tag:t/Ui+yhHFz2xnH150qg4rA==,type:str]
          http:
            paths:
                - backend:
                    service:
                        name: whoami
                        port:
                            name: http
                  path: /
                  pathType: ImplementationSpecific
    tls:
        - hosts:
            - ENC[AES256_GCM,data:r2W5YBNNSCtaHS7MYApV2A==,iv:HM1ZBayAeh0OF6WsmVPJRorVw16HUzQ4OOJ4IZKbXpw=,tag:5gIoQwJg85I84S9X8kUM9w==,type:str]
            - ENC[AES256_GCM,data:7D6e8HGFZ2IBv2KOxY8=,iv:eInsl/x02QSiTgpKc5aPPOBXKRYhRtXLy4vvxsTtIFI=,tag:BjqtlDXLb5DaCnRbEBP4Ug==,type:str]
          secretName: udev-cert
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17pzq63nanwarvma9nc7dvp7yy3dalgcr8e958dxrx9nfkkcwuyksw8qsds
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMM1EzRDR2TzUwU3g1cmZ0
            Vm5lQS9KaGx2ZkZkTkVUd2xOOW02NC9pdERJCmkxbjBlc0lJOFMxTVJJT29CY0hk
            d2VzazN4OXFYcXJTTGNFTk10cU0zQXMKLS0tIFZQVEhMbVB6RlFJQWRDdG9LK1Ay
            QjJ3RDJFbDhoeHhlVCtaUld2QkEveWsKSohxsmb+j3D7EzKI0dzJCQ6neN54dsD8
            Vtn+myVQzIs+2X7INqUClnAGLwF48t4R0TKTv4EOpQ3+6QKnAnNWVw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-12-04T00:23:26Z"
    mac: ENC[AES256_GCM,data:Wumcy/47f3vXr0HVgZrvOCrYz8PxEkWJ/q7ahydcWhHV23JOxa1eR8DaKfq5Gd+kwNJ68siLQI5j90tcqsCwt8OjKHroYjkVzOdvTTlUtjx+u9Zo7qZPRf9f4Yh7BMw10n4mWf9B9XfaK6zzZaEVdqc15euHn6EhZWTHt3F92Cg=,iv:zy+oJMjEPDVUdS3dmvDwl6CSfa39kMu4J1rxghKw3dM=,tag:aPTcohVYyR2ZrU0i47eeGg==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|host|hosts)$
    version: 3.7.3
